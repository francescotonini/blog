<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>My solution to the Google HashCode 2020 online round - Francesco Tonini - Developer</title><meta name=Description content="My C# solution to the &#34;Book&#34; problem of Google HashCode 2020 online round"><meta property="og:title" content="My solution to the Google HashCode 2020 online round"><meta property="og:description" content="My C# solution to the &#34;Book&#34; problem of Google HashCode 2020 online round"><meta property="og:type" content="article"><meta property="og:url" content="https://www.tonini.dev/hashcode2020/"><meta property="article:published_time" content="2020-02-08T21:20:35+02:00"><meta property="article:modified_time" content="2020-04-20T16:55:00+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="My solution to the Google HashCode 2020 online round"><meta name=twitter:description content="My C# solution to the &#34;Book&#34; problem of Google HashCode 2020 online round"><meta name=application-name content="Francesco Tonini"><meta name=apple-mobile-web-app-title content="Francesco Tonini"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://www.tonini.dev/hashcode2020/><link rel=next href=https://www.tonini.dev/ubuntu-20-04-hyperv/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"My solution to the Google HashCode 2020 online round","inLanguage":"","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.tonini.dev\/hashcode2020\/"},"image":{"@type":"ImageObject","url":"https:\/\/www.tonini.dev\/seo.png","width":800,"height":534},"genre":"posts","keywords":"google, hashcode, csharp","wordcount":549,"url":"https:\/\/www.tonini.dev\/hashcode2020\/","datePublished":"2020-02-08T21:20:35+02:00","dateModified":"2020-04-20T16:55:00+02:00","publisher":{"@type":"Organization","name":"Francesco Tonini","logo":{"@type":"ImageObject","url":"https:\/\/www.tonini.dev\/logo.png","width":512,"height":512}},"author":{"@type":"Person","name":"Francesco Tonini"},"description":"My C# solution to the \"Book\" problem of Google HashCode 2020 online round"}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Francesco Tonini - Developer">Francesco Tonini - Developer</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/about/>About </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=https://github.com/francescotonini title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Francesco Tonini - Developer">Francesco Tonini - Developer</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/>Posts</a><a class=menu-item href=/about/>About</a><a class=menu-item href=/tags/>Tags</a><a class=menu-item href=https://github.com/francescotonini title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">My solution to the Google HashCode 2020 online round</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://tonini.dev title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>Francesco Tonini</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-02-08>2020-02-08</time>&nbsp;
<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;about 549 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;3 min&nbsp;</div></div><div class="details toc" id=toc-static><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#a-naive-approach>A naive approach</a></li><li><a href=#less-duplicates-more-score>Less duplicates, more score?</a></li><li><a href=#so-job-done>So, job done?</a></li><li><a href=#about-dataset-d---tough-choices>About dataset &ldquo;D - tough choices&rdquo;</a></li></ul></nav></div></div><div class=content id=content><p>Hi everyone! This post goes through the story behind the development of my solution for the Google HashCode 2020 online round. If you have never heard of Google HashCode, it is a team coding competition made by Google to solve engineering problems. There is no programming language constraints, just a problem to solve in a fixed amount of time. After the online round, the best teams will be invited by Google for the final round.</p><p>Yesterday&rsquo;s problem was to plan which books to scan from a set of libraries. Each book has its own score and the goal was to maximize the total score of scanned books. The full problem statement will be available on the Google HashCode website shortly.</p><p>Enough of that, let&rsquo;s make our hands dirty. This solution is available on <a href=https://github.com/francescotonini/hashcode-books target=_blank rel="noopener noreffer">GitHub</a> and it is written in C# (don&rsquo;t be scared by that, if you known a bit of Java and lambda you&rsquo;ll be fine).</p><h2 id=a-naive-approach>A naive approach</h2><p>First of all, I had to find a metric to sort each library and pick the best ones. I decided to calculate the score of each library, then sort them in descending order, and output it.</p><p><img class=lazyload src=/svg/loading/small.min.svg data-src=https://dev-to-uploads.s3.amazonaws.com/i/plaeo5lm7rjkrljsv1kx.png data-srcset="https://dev-to-uploads.s3.amazonaws.com/i/plaeo5lm7rjkrljsv1kx.png, https://dev-to-uploads.s3.amazonaws.com/i/plaeo5lm7rjkrljsv1kx.png 1.5x, https://dev-to-uploads.s3.amazonaws.com/i/plaeo5lm7rjkrljsv1kx.png 2x" data-sizes=auto alt="Oh boy, that&amp;rsquo;s bad" title="Oh boy, that&amp;rsquo;s bad"></p><p>Unsurprisingly, the total score was terrible. What I didn&rsquo;t take into consideration were two main facts: first, two or more libraries may have the same book, but I only need to scan it once; second, what should I do when two libraries have the same score? How should I prioritize one over the other?</p><h2 id=less-duplicates-more-score>Less duplicates, more score?</h2><p>So I was back to the drawing board. This time, when I am facing two or more libraries with the same score, I pick the one with the least signup time, so that to allow more books to be scanned in parallel. Also, the score of a library takes into account only books that haven&rsquo;t been scanned before. That should fix it!</p><h2 id=so-job-done>So, job done?</h2><p><img class=lazyload src=/svg/loading/small.min.svg data-src=https://dev-to-uploads.s3.amazonaws.com/i/5ou6vmoc7z6u7rvmht6u.jpg data-srcset="https://dev-to-uploads.s3.amazonaws.com/i/5ou6vmoc7z6u7rvmht6u.jpg, https://dev-to-uploads.s3.amazonaws.com/i/5ou6vmoc7z6u7rvmht6u.jpg 1.5x, https://dev-to-uploads.s3.amazonaws.com/i/5ou6vmoc7z6u7rvmht6u.jpg 2x" data-sizes=auto alt="Well yes, but actually no" title="Well yes, but actually no"></p><p>While I did improve the score on one dataset, the others were just like the first attempt. Also, the dataset &ldquo;D&rdquo; was really slow, but we&rsquo;ll get back to it later on.</p><p>So, as you may expect, I was back to the drawing board again; yet, something wasn&rsquo;t adding up. What if instead to sorting by score, then signup time, I do signup time first, then score?</p><script type=application/javascript src="https://gist.github.com/francescotonini/531ae2d1064179411844999b8969ab02.js?file=Program.cs"></script><p>Oh well, that was the kind of improvement I was looking for.</p><p><img class=lazyload src=/svg/loading/small.min.svg data-src=https://dev-to-uploads.s3.amazonaws.com/i/3vafiffhkjq8hh35qv4f.png data-srcset="https://dev-to-uploads.s3.amazonaws.com/i/3vafiffhkjq8hh35qv4f.png, https://dev-to-uploads.s3.amazonaws.com/i/3vafiffhkjq8hh35qv4f.png 1.5x, https://dev-to-uploads.s3.amazonaws.com/i/3vafiffhkjq8hh35qv4f.png 2x" data-sizes=auto alt="That&amp;rsquo;s better" title="That&amp;rsquo;s better"></p><h2 id=about-dataset-d---tough-choices>About dataset &ldquo;D - tough choices&rdquo;</h2><p>While I was happy with the overall result, I had to find a solution for dataset &ldquo;D&rdquo;, which on the above implementation was painfully slow. While looking at the data I realized that all books have a score of 65, meaning that I didn&rsquo;t need to calculate the score, I just had to multiply the number of books that can be scanned every day by the number of days and 65. This was fundamental to keep the execution time at a reasonable level (remember that we have a limited amount of time).</p><script type=application/javascript src="https://gist.github.com/francescotonini/531ae2d1064179411844999b8969ab02.js?file=Library.cs"></script><p>This has been a hell of a ride, but it was worth it. It&rsquo;s not the perfect score, but I am more than happy about the result.</p><p>If you would like to see my implementation, head over to <a href=https://github.com/francescotonini/hashcode-books target=_blank rel="noopener noreffer">GitHub</a>. If you like this article, please consider sharing it with friends and colleagues. Ciao!</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>The article was updated on 2020-04-20</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://www.tonini.dev/hashcode2020/ data-title="My solution to the Google HashCode 2020 online round" data-via=toninifrancesco data-hashtags=google,hashcode,csharp><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://www.tonini.dev/hashcode2020/><i class="fab fa-linkedin fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/google/>google</a>,&nbsp;<a href=/tags/hashcode/>hashcode</a>,&nbsp;<a href=/tags/csharp/>csharp</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/ubuntu-20-04-hyperv/ class=next rel=next title="How to install Ubuntu 20.04 on Hyper-V with enhanced session">How to install Ubuntu 20.04 on Hyper-V with enhanced session<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.69.2">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.8"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://tonini.dev target=_blank>Francesco Tonini</a></span>&nbsp;|&nbsp;<span class=license><a href=https://creativecommons.org/licenses/by-nc-nd/3.0/legalcode>All Rights Reserved</a>.</span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.0/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false}};</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-84358665-4',{'anonymize_ip':true});</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-84358665-4" async></script></body></html>